@import '../helpers/settings'
@import '../helpers/mixins'

////////////////////////////////////////
// $Time control
////////////////////////////////////////

//////////////////////////////////////// Block variables

@keyframes underscore-blink
  from
    opacity: 1
  to
    opacity: 0

//////////////////////////////////////// Block mixins and functions


//////////////////////////////////////// Block styles
$block: ".time-control"

#{$block}
  display: block
  width: 100%

  // $Time control MOD: type icon
  &_type_icon

  // $Time control MOD: adjust touch
  &_adjust_touch

  // $Time control MOD: state error
  &_state_error


  // $Time control input
  &__input
    position: relative
    display: block
    width: 100%
    height: 50px

    // $Time control input CONTEXT: $Time control MOD: state error
    #{$block}_state_error &
      outline: 1px solid map-get($boss-app-palette, alert-border)

    &:before
      #{$block}_type_icon &
        content: '\e961'
        position: absolute
        top: 50%
        left: 20px
        z-index: 10
        display: block
        width: 14px
        height: 14px
        margin-top: -7px
        font-family: icons
        font-size: 14px
        line-height: 14px
        color: #808080

    & input
      +text-normalizer()
      display: block
      width: 100%
      height: 100%
      line-height: 1
      padding: 5px 20px
      background-color: #FFF
      border: 1px solid #d8d8d8
      border-radius: 2px
      box-shadow: none
      appearance: none
      -moz-appearance: none
      -webkit-appearance: none
      transition: none

      #{$block}_type_icon &
        padding-left: 45px

      #{$block}_state_error &
        color: map-get($boss-app-palette, alert)

      &:focus
        outline: none
        border-color: #d8d8d8
        box-shadow: 0 0 5px 0 #d8d8d8

      &[type=text]::-ms-clear
        display: none

      &[readonly]
        background-color: #FFF
        cursor: text

      &::selection
        background: #4c4c4c
        color: #fff

      &::-moz-selection
        background: #4c4c4c
        color: #fff

      ::-webkit-input-placeholder
        color: $boss-input-placeholder-color
        opacity:  1 !important

      :-moz-placeholder
        color: $boss-input-placeholder-color
        opacity:  1 !important

      ::-moz-placeholder
        color: $boss-input-placeholder-color
        opacity:  1 !important

      :-ms-input-placeholder
        color: $boss-input-placeholder-color
        opacity:  1 !important

      :placeholder-shown
        color: $boss-input-placeholder-color
        opacity:  1 !important


  // $Time control input clear
  &__input-clear
    +text-normalizer()
    position: absolute
    top: 50%
    right: 10px
    z-index: 10
    display: block
    width: 20px
    height: 20px
    margin-top: -10px
    color: transparent
    font-size: 0
    line-height: 0
    text-align: center
    cursor: pointer
    border: none
    outline: none
    background: none
    overflow: hidden

    &:before
      content: "\e96a"
      display: inline-block
      color: #aaa
      font-family: icons
      font-size: 12px
      line-height: 20px
      text-align: center
      transition: color .4s

    &:hover
      &:before
        color: #4c4c4c

    &:focus
      outline: none


  // $Time control panel
  &__panel
    position: absolute
    top: calc(100% - 1px)
    left: 0
    z-index: 9999
    border: 1px solid #d8d8d8
    background-color: #fff


  // $Time control picker
  &__picker
    position: relative
    display: block
    width: 140px

    @media screen and (max-width: 480px)
      width: 180px


  // $Time control info
  &__info
    display: flex
    flex-direction: row
    justify-content: center
    align-items: center
    width: 100%
    height: 60px
    padding: 0 10px
    background-color: #f8f8f8
    border-bottom: 1px solid #eee

    // $Time control info CONTEXT: $Time control MOD: adjust touch
    #{$block}_adjust_touch &
      justify-content: space-between

    @media screen and (max-width: 480px)
      height: 40px


  // $Time control value
  &__value
    +text-normalizer()
    flex-grow: 0
    flex-shrink: 0
    position: relative
    display: flex
    flex-direction: row
    justify-content: center
    align-items: center
    width: auto
    font-size: 24px
    line-height: 1
    font-weight: 600
    cursor: text
    user-select: none
    text-align: center

    @media screen and (max-width: 480px)
      font-size: 20px


  // $Time control value part
  &__value-part
    flex-grow: 0
    flex-shrink: 0
    display: inline-block
    padding: 4px 0 8px

    @media screen and (max-width: 480px)
      padding: 4px 0 6px

    // $Time control value part MOD: state selected
    &_state_selected
      background-color: #4c4c4c
      color: #fff
      padding: 4px 4px 8px

      @media screen and (max-width: 480px)
        padding: 4px 4px 6px


  // $Time control value delimiter
  &__value-delimiter
    flex-grow: 0
    flex-shrink: 0
    display: inline-block
    padding: 4px 4px 8px

    @media screen and (max-width: 480px)
      padding: 4px 4px 6px


  // $Time control value underscore
  &__value-underscore
    display: inline-block
    animation-name: underscore-blink
    animation-duration: .8s
    animation-iteration-count: infinite
    opacity: 1


  // $Time control actions
  &__actions
    flex-grow: 0
    flex-shrink: 0
    display: none

    // $Time control actions CONTEXT: $Time control MOD: adjust touch
    #{$block}_adjust_touch &
      display: block


  // $Time control action
  &__action
    +text-normalizer()
    display: inline-block
    width: 20px
    height: 20px
    color: transparent
    font-size: 0
    line-height: 0
    text-align: center
    cursor: pointer
    border: none
    outline: none
    background: none
    overflow: hidden

    &:before
      content: ""
      display: inline-block
      color: #aaa
      font-family: icons
      font-size: 12px
      line-height: 20px
      text-align: center
      transition: color .4s

    &:hover
      &:before
        color: #4c4c4c

    &:focus
      outline: none

    // $Time control action MOD: role cancel
    &_role_cancel
      &:before
        content: "\e96a"
        color: map-get($boss-app-palette, alert)

      &:hover
        &:before
          color: darken(map-get($boss-app-palette, alert), 10%)


  // $Time control swipers
  &__swipers
    position: relative
    display: flex
    flex-direction: row
    justify-content: flex-start
    align-items: flex-start
    padding: 10px

    &:before,
    &:after
      content: ''
      position: absolute
      left: 10px
      right: 10px
      z-index: 0
      border-bottom: 1px solid #aaa

    &:before
      top: 50px

      @media screen and (max-width: 480px)
        top: 70px

    &:after
      bottom: 50px

      @media screen and (max-width: 480px)
        bottom: 70px


  // $Time control swiper
  &__swiper
    flex-grow: 0
    flex-shrink: 0
    position: relative
    z-index: 1

    &:not(:last-child)
      &:after
        content: ':'
        position: absolute
        right: -1px
        top: 50%
        z-index: 0
        display: block
        height: 20px
        margin-top: -12px
        font-size: 20px
        line-height: 20px
        color: #808080

    & .swiper,
    & .swiper-container
      position: relative
      display: block
      width: 60px
      height: 120px
      overflow: hidden

      @media screen and (max-width: 480px)
        width: 80px
        height: 180px

      &:before,
      &:after
        content: ""
        position: absolute
        left: 50%
        z-index: 0
        width: 0
        height: 0
        margin-left: -2px
        border-style: solid
        border-width: 4px
        border-color: transparent

      &:before
        top: 0
        border-top-width: 0
        border-bottom-color: #aaa

      &:after
        bottom: 0
        border-bottom-width: 0
        border-top-color: #aaa

    & .swiper-slide
      +text-normalizer()
      display: flex
      justify-content: center
      align-items: center
      font-size: 20px
      line-height: 1
      font-weight: 600
      cursor: default
      color: #aaa
      user-select: none

      @media screen and (max-width: 480px)
        font-size: 24px

    & .swiper-slide-prev,
    & .swiper-slide-next
      cursor: pointer

    & .swiper-slide-active
      color: #4c4c4c
